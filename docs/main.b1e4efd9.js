(()=>{"use strict";var e,n={759:(e,n,o)=>{o.d(n,{Z:()=>t});const t="uniform sampler2D mirrorSampler;\nuniform float alpha;\nuniform float time;\nuniform float size;\nuniform float distortionScale;\nuniform sampler2D normalSampler;\nuniform vec3 sunColor;\nuniform vec3 sunDirection;\nuniform vec3 eye;\nuniform vec3 waterColor;\nvarying vec4 mirrorCoord;\nvarying vec4 worldPosition;\nuniform float speed;\n\nvec4 getNoise(vec2 uv) {\n    float offset;\n    if (speed == 0.0){\n        offset = time / 10.0;\n    }\n    else {\n        offset = speed;\n    }\n    vec2 uv3 = uv / vec2(50.0, 50.0) - vec2(speed / 1000.0, offset);\n    vec2 uv0 = vec2(0, 0);\n    vec2 uv1 = vec2(0, 0);\n    vec2 uv2 = vec2(0, 0);\n    vec4 noise = texture2D(normalSampler, uv0) +\n    texture2D(normalSampler, uv1) +\n    texture2D(normalSampler, uv2) +\n    texture2D(normalSampler, uv3);\n    return noise * 0.5 - 1.0;\n}\nvoid sunLight(const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor) {\n    vec3 reflection = normalize(reflect(-sunDirection, surfaceNormal));\n    float direction = max(0.0, dot(eyeDirection, reflection));\n    specularColor += pow(direction, shiny) * sunColor * spec;\n    diffuseColor += max(dot(sunDirection, surfaceNormal), 0.0) * sunColor * diffuse;\n}\n    #include <common>\n    #include <packing>\n    #include <bsdfs>\n    #include <fog_pars_fragment>\n    #include <logdepthbuf_pars_fragment>\n    #include <lights_pars_begin>\n    #include <shadowmap_pars_fragment>\n    #include <shadowmask_pars_fragment>\nvoid main() {\n    #include <logdepthbuf_fragment>\n    vec4 noise = getNoise(worldPosition.xz * size);\n    vec3 surfaceNormal = normalize(noise.xzy * vec3(1.5, 1.0, 1.5));\n    vec3 diffuseLight = vec3(0.0);\n    vec3 specularLight = vec3(0.0);\n    vec3 worldToEye = eye-worldPosition.xyz;\n    vec3 eyeDirection = normalize(worldToEye);\n    sunLight(surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight);\n    float distance = length(worldToEye);\n    vec2 distortion = surfaceNormal.xz * (0.001 + 1.0 / distance) * distortionScale;\n    vec3 reflectionSample = vec3(texture2D(mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion));\n    float theta = max(dot(eyeDirection, surfaceNormal), 0.0);\n    float rf0 = 0.3;\n    float reflectance = rf0 + (1.0 - rf0) * pow((1.0 - theta), 5.0);\n    vec3 scatter = max(0.0, dot(surfaceNormal, eyeDirection)) * waterColor;\n    vec3 albedo = mix((sunColor * diffuseLight * 0.3 + scatter) * getShadowMask(), (vec3(0.1) + reflectionSample * 0.9 + reflectionSample * specularLight), reflectance);\n    vec3 outgoingLight = albedo;\n    gl_FragColor = vec4(outgoingLight, alpha);\n    #include <tonemapping_fragment>\n    #include <fog_fragment>\n}"},8120:(e,n,o)=>{o.d(n,{Z:()=>t});const t="uniform mat4 textureMatrix;\nuniform float time;\nvarying vec4 mirrorCoord;\nvarying vec4 worldPosition;\nvarying float speed;\n#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n    mirrorCoord = modelMatrix * vec4( position, 1.0 );\n    worldPosition = mirrorCoord.xyzw;\n    mirrorCoord = textureMatrix * mirrorCoord;\n    vec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n    #include <beginnormal_vertex>\n    #include <defaultnormal_vertex>\n    #include <logdepthbuf_vertex>\n    #include <fog_vertex>\n    #include <shadowmap_vertex>\n}"},5829:(e,n,o)=>{const t=o(9977),r=o(9145),i=o(2644),a=o(2456),l=new t.Scene,s=new t.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,2e3);let d;const u={objectMoving:!1,speed:0,cameraMovingToStartPosition:!1,cameraStartAnimationPlaying:!1,ready:!1},c=new Array,m=function(){const e=new t.PlaneGeometry(1e4,1e4);return new r.Water(e,{textureWidth:512,textureHeight:512,waterNormals:(new t.TextureLoader).load("./static/normals/waternormals.jpeg",(function(e){e.wrapS=e.wrapT=t.MirroredRepeatWrapping})),sunDirection:new t.Vector3,sunColor:16777215,waterColor:7695,distortionScale:3.7,fog:void 0!==l.fog})}();const v=()=>{var e,n,o,t;requestAnimationFrame(v),u.ready&&(c.forEach((e=>{e.userData.clock&&e.userData.mixer&&e.userData.mixer.update(e.userData.clock.getDelta())})),null===(n=null===(e=s.userData)||void 0===e?void 0:e.mixer)||void 0===n||n.update(null===(t=null===(o=s.userData)||void 0===o?void 0:o.clock)||void 0===t?void 0:t.getDelta())),f(),d.render(l,s)};function f(){m.material.uniforms.time.value+=1/60,m.material.uniforms.speed.value+=.001,u.objectMoving&&(m.material.uniforms.speed.value+=u.speed/50)}window.addEventListener("resize",(function(){s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),d&&d.setSize(window.innerWidth,window.innerHeight),f()}),!1),(0,a.objectsInit)().then((()=>{(function(){d=new t.WebGLRenderer,d.toneMapping=t.ACESFilmicToneMapping,d.setSize(window.innerWidth,window.innerHeight),d.setPixelRatio(window.devicePixelRatio),document.body.appendChild(d.domElement);const e=new t.Vector3,n=new t.HemisphereLight(16777215,4473924,1);n.position.set(0,1,0),l.add(n),m.rotation.x=-Math.PI/2,m.rotation.z=0,l.add(m);const o=new i.Sky;o.scale.setScalar(1e4),l.add(o),function(e,n){const o=e.material.uniforms;o.turbidity.value=10,o.rayleigh.value=2,o.mieCoefficient.value=.005,o.mieDirectionalG.value=.8;const r=new t.PMREMGenerator(d),i=t.MathUtils.degToRad(87),a=t.MathUtils.degToRad(115);n.setFromSphericalCoords(1,i,a),e.material.uniforms.sunPosition.value.copy(n),l.environment=r.fromScene(e).texture}(o,e),function(e,n){e.material.uniforms.speed.value=0,e.material.uniforms.sunDirection.value.copy(n).normalize()}(m,e),a.bunnyModel.scale.set(.02,.02,.02),a.bunnyModel.rotation.set(0,1,0),a.bunnyModel.position.y=3,l.add(a.bunnyModel),s.position.set(0,10,40),s.lookAt(new t.Vector3(0,-500,-1400)),l.add(new t.AxesHelper(20)),u.ready=!0})(),v()}));const p={87:"W",83:"S"},w=new EventTarget;let g=0;w.addEventListener("W_down",(function(){g=0,u.objectMoving||(u.objectMoving=!0),u.speed=function(e,n){let o=(e=>1-(1-e)*(1-e))(e+.002);return o>1&&(o=1),o}(u.speed)})),w.addEventListener("S_down",(function(){var e;u.objectMoving||(u.objectMoving=!0),u.speed-=(g+=.1,e=g,1-Math.pow(1-e,3)),u.speed<0&&(u.speed=0)})),document.addEventListener("keydown",(function(e){let n=e.which;n in p&&w.dispatchEvent(new Event(p[n]+"_down"))}),!1),document.addEventListener("keyup",(function(e){let n=e.which;n in p&&w.dispatchEvent(new Event(p[n]+"_up"))}),!1)},2456:(e,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.objectsInit=n.bunnyModel=void 0;const t=new(o(1217).GLTFLoader);n.objectsInit=async()=>{n.bunnyModel=(await t.loadAsync("./static/models/bunny_plushie/scene.gltf")).scene}},9145:(e,n,o)=>{o.r(n),o.d(n,{Water:()=>w});var t=o(6454),r=o(6881),i=o(3662),a=o(1661),l=o(1158),s=o(9203),d=o(223),u=o(1051),c=o(4302),m=o(2043),v=o(6682),f=o(3935),p=o(4595);class w extends t.K{constructor(e,n={}){super(e);const t=this,w=void 0!==n.textureWidth?n.textureWidth:512,g=void 0!==n.textureHeight?n.textureHeight:512,h=void 0!==n.clipBias?n.clipBias:0,x=void 0!==n.alpha?n.alpha:1,y=void 0!==n.time?n.time:0,M=void 0!==n.waterNormals?n.waterNormals:null,b=void 0!==n.sunDirection?n.sunDirection:new r.P(.70707,.70707,0),S=new i.I(void 0!==n.sunColor?n.sunColor:16777215),C=new i.I(void 0!==n.waterColor?n.waterColor:8355711),P=void 0!==n.eye?n.eye:new r.P(0,0,0),_=void 0!==n.distortionScale?n.distortionScale:20,D=void 0!==n.side?n.side:a.Wl3,j=void 0!==n.fog&&n.fog,W=void 0!==n.speed?n.speed:5,L=new l.J,z=new r.P,E=new r.P,T=new r.P,k=new s.y,O=new r.P(0,0,-1),N=new d.L,R=new r.P,F=new r.P,I=new d.L,A=new s.y,H=new u.c,U={minFilter:a.wem,magFilter:a.wem,format:a.UCm},V=new c.d(w,g,U);m.isPowerOfTwo(w)&&m.isPowerOfTwo(g)||(V.texture.generateMipmaps=!1);const G={uniforms:v.rD.merge([f.r.fog,f.r.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new s.y},sunColor:{value:new i.I(8355711)},sunDirection:{value:new r.P(.70707,.70707,0)},eye:{value:new r.P(0,0,0)},waterColor:{value:new i.I(5592405)},speed:{value:5}}]),vertexShader:o(8120).Z,fragmentShader:o(759).Z},Z=new p.j({fragmentShader:G.fragmentShader,vertexShader:G.vertexShader,uniforms:v.rD.clone(G.uniforms),lights:!0,side:D,fog:j});Z.uniforms.mirrorSampler.value=V.texture,Z.uniforms.textureMatrix.value=A,Z.uniforms.alpha.value=x,Z.uniforms.time.value=y,Z.uniforms.normalSampler.value=M,Z.uniforms.sunColor.value=S,Z.uniforms.waterColor.value=C,Z.uniforms.sunDirection.value=b,Z.uniforms.distortionScale.value=_,Z.uniforms.speed.value=W,Z.uniforms.eye.value=P,t.material=Z,t.onBeforeRender=function(e,n,o){if(E.setFromMatrixPosition(t.matrixWorld),T.setFromMatrixPosition(o.matrixWorld),k.extractRotation(t.matrixWorld),z.set(0,0,1),z.applyMatrix4(k),R.subVectors(E,T),R.dot(z)>0)return;R.reflect(z).negate(),R.add(E),k.extractRotation(o.matrixWorld),O.set(0,0,-1),O.applyMatrix4(k),O.add(T),F.subVectors(E,O),F.reflect(z).negate(),F.add(E),H.position.copy(R),H.up.set(0,1,0),H.up.applyMatrix4(k),H.up.reflect(z),H.lookAt(F),H.far=o.far,H.updateMatrixWorld(),H.projectionMatrix.copy(o.projectionMatrix),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(H.projectionMatrix),A.multiply(H.matrixWorldInverse),L.setFromNormalAndCoplanarPoint(z,E),L.applyMatrix4(H.matrixWorldInverse),N.set(L.normal.x,L.normal.y,L.normal.z,L.constant);const r=H.projectionMatrix;I.x=(Math.sign(N.x)+r.elements[8])/r.elements[0],I.y=(Math.sign(N.y)+r.elements[9])/r.elements[5],I.z=-1,I.w=(1+r.elements[10])/r.elements[14],N.multiplyScalar(2/N.dot(I)),r.elements[2]=N.x,r.elements[6]=N.y,r.elements[10]=N.z+1-h,r.elements[14]=N.w,P.setFromMatrixPosition(o.matrixWorld);const i=e.getRenderTarget(),a=e.xr.enabled,l=e.shadowMap.autoUpdate;t.visible=!1,e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(V),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(n,H),t.visible=!0,e.xr.enabled=a,e.shadowMap.autoUpdate=l,e.setRenderTarget(i);const s=o.viewport;void 0!==s&&e.state.viewport(s)}}}w.prototype.isWater=!0}},o={};function t(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={exports:{}};return n[e](i,i.exports,t),i.exports}t.m=n,e=[],t.O=(n,o,r,i)=>{if(!o){var a=1/0;for(u=0;u<e.length;u++){for(var[o,r,i]=e[u],l=!0,s=0;s<o.length;s++)(!1&i||a>=i)&&Object.keys(t.O).every((e=>t.O[e](o[s])))?o.splice(s--,1):(l=!1,i<a&&(a=i));if(l){e.splice(u--,1);var d=r();void 0!==d&&(n=d)}}return n}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,r,i]},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};t.O.j=n=>0===e[n];var n=(n,o)=>{var r,i,[a,l,s]=o,d=0;if(a.some((n=>0!==e[n]))){for(r in l)t.o(l,r)&&(t.m[r]=l[r]);if(s)var u=s(t)}for(n&&n(o);d<a.length;d++)i=a[d],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(u)},o=self.webpackChunkthree_demo=self.webpackChunkthree_demo||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))})();var r=t.O(void 0,[604],(()=>t(5829)));r=t.O(r)})();