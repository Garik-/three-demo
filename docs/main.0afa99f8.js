(()=>{"use strict";var e,n={759:(e,n,o)=>{o.d(n,{Z:()=>r});const r="uniform sampler2D mirrorSampler;\nuniform float alpha;\nuniform float time;\nuniform float size;\nuniform float distortionScale;\nuniform sampler2D normalSampler;\nuniform vec3 sunColor;\nuniform vec3 sunDirection;\nuniform vec3 eye;\nuniform vec3 waterColor;\nvarying vec4 mirrorCoord;\nvarying vec4 worldPosition;\nuniform float speed;\n\nvec4 getNoise(vec2 uv) {\n    float offset;\n    if (speed == 0.0){\n        offset = time / 10.0;\n    }\n    else {\n        offset = speed;\n    }\n    vec2 uv3 = uv / vec2(50.0, 50.0) - vec2(speed / 1000.0, offset);\n    vec2 uv0 = vec2(0, 0);\n    vec2 uv1 = vec2(0, 0);\n    vec2 uv2 = vec2(0, 0);\n    vec4 noise = texture2D(normalSampler, uv0) +\n    texture2D(normalSampler, uv1) +\n    texture2D(normalSampler, uv2) +\n    texture2D(normalSampler, uv3);\n    return noise * 0.5 - 1.0;\n}\nvoid sunLight(const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor) {\n    vec3 reflection = normalize(reflect(-sunDirection, surfaceNormal));\n    float direction = max(0.0, dot(eyeDirection, reflection));\n    specularColor += pow(direction, shiny) * sunColor * spec;\n    diffuseColor += max(dot(sunDirection, surfaceNormal), 0.0) * sunColor * diffuse;\n}\n    #include <common>\n    #include <packing>\n    #include <bsdfs>\n    #include <fog_pars_fragment>\n    #include <logdepthbuf_pars_fragment>\n    #include <lights_pars_begin>\n    #include <shadowmap_pars_fragment>\n    #include <shadowmask_pars_fragment>\nvoid main() {\n    #include <logdepthbuf_fragment>\n    vec4 noise = getNoise(worldPosition.xz * size);\n    vec3 surfaceNormal = normalize(noise.xzy * vec3(1.5, 1.0, 1.5));\n    vec3 diffuseLight = vec3(0.0);\n    vec3 specularLight = vec3(0.0);\n    vec3 worldToEye = eye-worldPosition.xyz;\n    vec3 eyeDirection = normalize(worldToEye);\n    sunLight(surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight);\n    float distance = length(worldToEye);\n    vec2 distortion = surfaceNormal.xz * (0.001 + 1.0 / distance) * distortionScale;\n    vec3 reflectionSample = vec3(texture2D(mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion));\n    float theta = max(dot(eyeDirection, surfaceNormal), 0.0);\n    float rf0 = 0.3;\n    float reflectance = rf0 + (1.0 - rf0) * pow((1.0 - theta), 5.0);\n    vec3 scatter = max(0.0, dot(surfaceNormal, eyeDirection)) * waterColor;\n    vec3 albedo = mix((sunColor * diffuseLight * 0.3 + scatter) * getShadowMask(), (vec3(0.1) + reflectionSample * 0.9 + reflectionSample * specularLight), reflectance);\n    vec3 outgoingLight = albedo;\n    gl_FragColor = vec4(outgoingLight, alpha);\n    #include <tonemapping_fragment>\n    #include <fog_fragment>\n}"},120:(e,n,o)=>{o.d(n,{Z:()=>r});const r="uniform mat4 textureMatrix;\nuniform float time;\nvarying vec4 mirrorCoord;\nvarying vec4 worldPosition;\nvarying float speed;\n#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n    mirrorCoord = modelMatrix * vec4( position, 1.0 );\n    worldPosition = mirrorCoord.xyzw;\n    mirrorCoord = textureMatrix * mirrorCoord;\n    vec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n    #include <beginnormal_vertex>\n    #include <defaultnormal_vertex>\n    #include <logdepthbuf_vertex>\n    #include <fog_vertex>\n    #include <shadowmap_vertex>\n}"},829:(e,n,o)=>{const r=o(604),t=o(145),i=o(644),a=new r.Scene,l=new r.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,2e3);let s;const d={objectMoving:!1,speed:0,cameraMovingToStartPosition:!1,cameraStartAnimationPlaying:!1,ready:!1},u=new Array,c=function(){const e=new r.PlaneGeometry(1e4,1e4);return new t.Water(e,{textureWidth:512,textureHeight:512,waterNormals:(new r.TextureLoader).load("./static/normals/waternormals.jpeg",(function(e){e.wrapS=e.wrapT=r.MirroredRepeatWrapping})),sunDirection:new r.Vector3,sunColor:16777215,waterColor:7695,distortionScale:3.7,fog:void 0!==a.fog})}(),m=()=>{var e,n,o,r;requestAnimationFrame(m),d.ready&&(u.forEach((e=>{e.userData.clock&&e.userData.mixer&&e.userData.mixer.update(e.userData.clock.getDelta())})),null===(n=null===(e=l.userData)||void 0===e?void 0:e.mixer)||void 0===n||n.update(null===(r=null===(o=l.userData)||void 0===o?void 0:o.clock)||void 0===r?void 0:r.getDelta())),v(),s.render(a,l)};function v(){c.material.uniforms.time.value+=1/60,c.material.uniforms.speed.value+=.001,d.objectMoving&&(c.material.uniforms.speed.value+=d.speed/50)}window.addEventListener("resize",(function(){l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),s&&s.setSize(window.innerWidth,window.innerHeight),v()}),!1),function(){s=new r.WebGLRenderer,s.toneMapping=r.ACESFilmicToneMapping,s.setSize(window.innerWidth,window.innerHeight),s.setPixelRatio(window.devicePixelRatio),document.body.appendChild(s.domElement);const e=new r.Vector3,n=new r.HemisphereLight(16777215,4473924,1);n.position.set(0,1,0),a.add(n),c.rotation.x=-Math.PI/2,c.rotation.z=0,a.add(c);const o=new i.Sky;o.scale.setScalar(1e4),a.add(o),function(e,n){const o=e.material.uniforms;o.turbidity.value=10,o.rayleigh.value=2,o.mieCoefficient.value=.005,o.mieDirectionalG.value=.8;const t=new r.PMREMGenerator(s),i=r.MathUtils.degToRad(87),l=r.MathUtils.degToRad(115);n.setFromSphericalCoords(1,i,l),e.material.uniforms.sunPosition.value.copy(n),a.environment=t.fromScene(e).texture}(o,e),function(e,n){e.material.uniforms.speed.value=0,e.material.uniforms.sunDirection.value.copy(n).normalize()}(c,e),d.ready=!0,l.position.set(0,10,30),a.add(new r.AxesHelper(20))}(),m();const f={87:"W",83:"S"},p=new EventTarget;p.addEventListener("W_down",(function(){d.objectMoving||(d.objectMoving=!0),d.speed=function(e,n){let o=(e=>1-(1-e)*(1-e))(e+.002);return o>1&&(o=1),console.log(o),o}(d.speed)})),p.addEventListener("S_down",(function(){d.objectMoving||(d.objectMoving=!0),d.speed=0})),document.addEventListener("keydown",(function(e){let n=e.which;console.log(n),n in f&&p.dispatchEvent(new Event(f[n]+"_down"))}),!1),document.addEventListener("keyup",(function(e){let n=e.which;n in f&&p.dispatchEvent(new Event(f[n]+"_up"))}),!1)},145:(e,n,o)=>{o.r(n),o.d(n,{Water:()=>w});var r=o(454),t=o(881),i=o(662),a=o(661),l=o(158),s=o(203),d=o(223),u=o(51),c=o(302),m=o(43),v=o(682),f=o(935),p=o(595);class w extends r.K{constructor(e,n={}){super(e);const r=this,w=void 0!==n.textureWidth?n.textureWidth:512,g=void 0!==n.textureHeight?n.textureHeight:512,x=void 0!==n.clipBias?n.clipBias:0,h=void 0!==n.alpha?n.alpha:1,y=void 0!==n.time?n.time:0,S=void 0!==n.waterNormals?n.waterNormals:null,M=void 0!==n.sunDirection?n.sunDirection:new t.P(.70707,.70707,0),b=new i.I(void 0!==n.sunColor?n.sunColor:16777215),C=new i.I(void 0!==n.waterColor?n.waterColor:8355711),P=void 0!==n.eye?n.eye:new t.P(0,0,0),_=void 0!==n.distortionScale?n.distortionScale:20,D=void 0!==n.side?n.side:a.Wl3,W=void 0!==n.fog&&n.fog,j=void 0!==n.speed?n.speed:5,L=new l.J,z=new t.P,E=new t.P,T=new t.P,k=new s.y,O=new t.P(0,0,-1),N=new d.L,R=new t.P,F=new t.P,H=new d.L,A=new s.y,I=new u.c,U={minFilter:a.wem,magFilter:a.wem,format:a.UCm},V=new c.d(w,g,U);m.isPowerOfTwo(w)&&m.isPowerOfTwo(g)||(V.texture.generateMipmaps=!1);const G={uniforms:v.rD.merge([f.r.fog,f.r.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new s.y},sunColor:{value:new i.I(8355711)},sunDirection:{value:new t.P(.70707,.70707,0)},eye:{value:new t.P(0,0,0)},waterColor:{value:new i.I(5592405)},speed:{value:5}}]),vertexShader:o(120).Z,fragmentShader:o(759).Z},Z=new p.j({fragmentShader:G.fragmentShader,vertexShader:G.vertexShader,uniforms:v.rD.clone(G.uniforms),lights:!0,side:D,fog:W});Z.uniforms.mirrorSampler.value=V.texture,Z.uniforms.textureMatrix.value=A,Z.uniforms.alpha.value=h,Z.uniforms.time.value=y,Z.uniforms.normalSampler.value=S,Z.uniforms.sunColor.value=b,Z.uniforms.waterColor.value=C,Z.uniforms.sunDirection.value=M,Z.uniforms.distortionScale.value=_,Z.uniforms.speed.value=j,Z.uniforms.eye.value=P,r.material=Z,r.onBeforeRender=function(e,n,o){if(E.setFromMatrixPosition(r.matrixWorld),T.setFromMatrixPosition(o.matrixWorld),k.extractRotation(r.matrixWorld),z.set(0,0,1),z.applyMatrix4(k),R.subVectors(E,T),R.dot(z)>0)return;R.reflect(z).negate(),R.add(E),k.extractRotation(o.matrixWorld),O.set(0,0,-1),O.applyMatrix4(k),O.add(T),F.subVectors(E,O),F.reflect(z).negate(),F.add(E),I.position.copy(R),I.up.set(0,1,0),I.up.applyMatrix4(k),I.up.reflect(z),I.lookAt(F),I.far=o.far,I.updateMatrixWorld(),I.projectionMatrix.copy(o.projectionMatrix),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(I.projectionMatrix),A.multiply(I.matrixWorldInverse),L.setFromNormalAndCoplanarPoint(z,E),L.applyMatrix4(I.matrixWorldInverse),N.set(L.normal.x,L.normal.y,L.normal.z,L.constant);const t=I.projectionMatrix;H.x=(Math.sign(N.x)+t.elements[8])/t.elements[0],H.y=(Math.sign(N.y)+t.elements[9])/t.elements[5],H.z=-1,H.w=(1+t.elements[10])/t.elements[14],N.multiplyScalar(2/N.dot(H)),t.elements[2]=N.x,t.elements[6]=N.y,t.elements[10]=N.z+1-x,t.elements[14]=N.w,P.setFromMatrixPosition(o.matrixWorld);const i=e.getRenderTarget(),a=e.xr.enabled,l=e.shadowMap.autoUpdate;r.visible=!1,e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(V),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(n,I),r.visible=!0,e.xr.enabled=a,e.shadowMap.autoUpdate=l,e.setRenderTarget(i);const s=o.viewport;void 0!==s&&e.state.viewport(s)}}}w.prototype.isWater=!0}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return n[e](i,i.exports,r),i.exports}r.m=n,e=[],r.O=(n,o,t,i)=>{if(!o){var a=1/0;for(u=0;u<e.length;u++){for(var[o,t,i]=e[u],l=!0,s=0;s<o.length;s++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](o[s])))?o.splice(s--,1):(l=!1,i<a&&(a=i));if(l){e.splice(u--,1);var d=t();void 0!==d&&(n=d)}}return n}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,t,i]},r.d=(e,n)=>{for(var o in n)r.o(n,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};r.O.j=n=>0===e[n];var n=(n,o)=>{var t,i,[a,l,s]=o,d=0;if(a.some((n=>0!==e[n]))){for(t in l)r.o(l,t)&&(r.m[t]=l[t]);if(s)var u=s(r)}for(n&&n(o);d<a.length;d++)i=a[d],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},o=self.webpackChunkthree_demo=self.webpackChunkthree_demo||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))})();var t=r.O(void 0,[344],(()=>r(829)));t=r.O(t)})();