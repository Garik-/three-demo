(()=>{"use strict";var e,r={759:(e,r,o)=>{o.d(r,{Z:()=>n});const n="uniform sampler2D mirrorSampler;\nuniform float alpha;\nuniform float time;\nuniform float size;\nuniform float distortionScale;\nuniform sampler2D normalSampler;\nuniform vec3 sunColor;\nuniform vec3 sunDirection;\nuniform vec3 eye;\nuniform vec3 waterColor;\nvarying vec4 mirrorCoord;\nvarying vec4 worldPosition;\nuniform float speed;\n\nvec4 getNoise(vec2 uv) {\n    float offset;\n    if (speed == 0.0){\n        offset = time / 10.0;\n    }\n    else {\n        offset = speed;\n    }\n    vec2 uv3 = uv / vec2(50.0, 50.0) - vec2(speed / 1000.0, offset);\n    vec2 uv0 = vec2(0, 0);\n    vec2 uv1 = vec2(0, 0);\n    vec2 uv2 = vec2(0, 0);\n    vec4 noise = texture2D(normalSampler, uv0) +\n    texture2D(normalSampler, uv1) +\n    texture2D(normalSampler, uv2) +\n    texture2D(normalSampler, uv3);\n    return noise * 0.5 - 1.0;\n}\nvoid sunLight(const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor) {\n    vec3 reflection = normalize(reflect(-sunDirection, surfaceNormal));\n    float direction = max(0.0, dot(eyeDirection, reflection));\n    specularColor += pow(direction, shiny) * sunColor * spec;\n    diffuseColor += max(dot(sunDirection, surfaceNormal), 0.0) * sunColor * diffuse;\n}\n    #include <common>\n    #include <packing>\n    #include <bsdfs>\n    #include <fog_pars_fragment>\n    #include <logdepthbuf_pars_fragment>\n    #include <lights_pars_begin>\n    #include <shadowmap_pars_fragment>\n    #include <shadowmask_pars_fragment>\nvoid main() {\n    #include <logdepthbuf_fragment>\n    vec4 noise = getNoise(worldPosition.xz * size);\n    vec3 surfaceNormal = normalize(noise.xzy * vec3(1.5, 1.0, 1.5));\n    vec3 diffuseLight = vec3(0.0);\n    vec3 specularLight = vec3(0.0);\n    vec3 worldToEye = eye-worldPosition.xyz;\n    vec3 eyeDirection = normalize(worldToEye);\n    sunLight(surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight);\n    float distance = length(worldToEye);\n    vec2 distortion = surfaceNormal.xz * (0.001 + 1.0 / distance) * distortionScale;\n    vec3 reflectionSample = vec3(texture2D(mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion));\n    float theta = max(dot(eyeDirection, surfaceNormal), 0.0);\n    float rf0 = 0.3;\n    float reflectance = rf0 + (1.0 - rf0) * pow((1.0 - theta), 5.0);\n    vec3 scatter = max(0.0, dot(surfaceNormal, eyeDirection)) * waterColor;\n    vec3 albedo = mix((sunColor * diffuseLight * 0.3 + scatter) * getShadowMask(), (vec3(0.1) + reflectionSample * 0.9 + reflectionSample * specularLight), reflectance);\n    vec3 outgoingLight = albedo;\n    gl_FragColor = vec4(outgoingLight, alpha);\n    #include <tonemapping_fragment>\n    #include <fog_fragment>\n}"},120:(e,r,o)=>{o.d(r,{Z:()=>n});const n="uniform mat4 textureMatrix;\nuniform float time;\nvarying vec4 mirrorCoord;\nvarying vec4 worldPosition;\nvarying float speed;\n#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n    mirrorCoord = modelMatrix * vec4( position, 1.0 );\n    worldPosition = mirrorCoord.xyzw;\n    mirrorCoord = textureMatrix * mirrorCoord;\n    vec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n    #include <beginnormal_vertex>\n    #include <defaultnormal_vertex>\n    #include <logdepthbuf_vertex>\n    #include <fog_vertex>\n    #include <shadowmap_vertex>\n}"},829:(e,r,o)=>{const n=o(604),t=o(145),i=o(644),a=new n.Scene,l=new n.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,2e3);let s;const u={objectMoving:!1,speed:0,cameraMovingToStartPosition:!1,cameraStartAnimationPlaying:!1,ready:!1},d=new Array,c=function(){const e=new n.PlaneGeometry(1e4,1e4);return new t.Water(e,{textureWidth:512,textureHeight:512,waterNormals:(new n.TextureLoader).load("./static/normals/waternormals.jpeg",(function(e){e.wrapS=e.wrapT=n.MirroredRepeatWrapping})),sunDirection:new n.Vector3,sunColor:16777215,waterColor:7695,distortionScale:3.7,fog:void 0!==a.fog})}(),m=()=>{var e,r,o,n;requestAnimationFrame(m),u.ready&&(d.forEach((e=>{e.userData.clock&&e.userData.mixer&&e.userData.mixer.update(e.userData.clock.getDelta())})),null===(r=null===(e=l.userData)||void 0===e?void 0:e.mixer)||void 0===r||r.update(null===(n=null===(o=l.userData)||void 0===o?void 0:o.clock)||void 0===n?void 0:n.getDelta())),v(),s.render(a,l)};function v(){c.material.uniforms.time.value+=1/60,u.objectMoving&&(c.material.uniforms.speed.value+=u.speed/50)}window.addEventListener("resize",(function(){l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),s&&s.setSize(window.innerWidth,window.innerHeight),v()}),!1),function(){s=new n.WebGLRenderer,s.toneMapping=n.ACESFilmicToneMapping,s.setSize(window.innerWidth,window.innerHeight),s.setPixelRatio(window.devicePixelRatio),document.body.appendChild(s.domElement);const e=new n.Vector3,r=new n.HemisphereLight(16777215,4473924,1);r.position.set(0,1,0),a.add(r),c.rotation.x=-Math.PI/2,c.rotation.z=0,a.add(c);const o=new i.Sky;o.scale.setScalar(1e4),a.add(o),function(e,r){const o=e.material.uniforms;o.turbidity.value=10,o.rayleigh.value=2,o.mieCoefficient.value=.005,o.mieDirectionalG.value=.8;const t=new n.PMREMGenerator(s),i=n.MathUtils.degToRad(87),l=n.MathUtils.degToRad(115);r.setFromSphericalCoords(1,i,l),e.material.uniforms.sunPosition.value.copy(r),a.environment=t.fromScene(e).texture}(o,e),function(e,r){e.material.uniforms.speed.value=0,e.material.uniforms.sunDirection.value.copy(r).normalize()}(c,e),u.ready=!0,l.position.set(0,10,30),a.add(new n.AxesHelper(20))}(),m()},145:(e,r,o)=>{o.r(r),o.d(r,{Water:()=>w});var n=o(454),t=o(881),i=o(662),a=o(661),l=o(158),s=o(203),u=o(223),d=o(51),c=o(302),m=o(43),v=o(682),f=o(935),p=o(595);class w extends n.K{constructor(e,r={}){super(e);const n=this,w=void 0!==r.textureWidth?r.textureWidth:512,g=void 0!==r.textureHeight?r.textureHeight:512,x=void 0!==r.clipBias?r.clipBias:0,h=void 0!==r.alpha?r.alpha:1,y=void 0!==r.time?r.time:0,S=void 0!==r.waterNormals?r.waterNormals:null,M=void 0!==r.sunDirection?r.sunDirection:new t.P(.70707,.70707,0),C=new i.I(void 0!==r.sunColor?r.sunColor:16777215),P=new i.I(void 0!==r.waterColor?r.waterColor:8355711),b=void 0!==r.eye?r.eye:new t.P(0,0,0),D=void 0!==r.distortionScale?r.distortionScale:20,_=void 0!==r.side?r.side:a.Wl3,W=void 0!==r.fog&&r.fog,z=void 0!==r.speed?r.speed:5,j=new l.J,L=new t.P,T=new t.P,O=new t.P,k=new s.y,N=new t.P(0,0,-1),R=new u.L,F=new t.P,E=new t.P,H=new u.L,A=new s.y,I=new d.c,U={minFilter:a.wem,magFilter:a.wem,format:a.UCm},V=new c.d(w,g,U);m.isPowerOfTwo(w)&&m.isPowerOfTwo(g)||(V.texture.generateMipmaps=!1);const G={uniforms:v.rD.merge([f.r.fog,f.r.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new s.y},sunColor:{value:new i.I(8355711)},sunDirection:{value:new t.P(.70707,.70707,0)},eye:{value:new t.P(0,0,0)},waterColor:{value:new i.I(5592405)},speed:{value:5}}]),vertexShader:o(120).Z,fragmentShader:o(759).Z},Z=new p.j({fragmentShader:G.fragmentShader,vertexShader:G.vertexShader,uniforms:v.rD.clone(G.uniforms),lights:!0,side:_,fog:W});Z.uniforms.mirrorSampler.value=V.texture,Z.uniforms.textureMatrix.value=A,Z.uniforms.alpha.value=h,Z.uniforms.time.value=y,Z.uniforms.normalSampler.value=S,Z.uniforms.sunColor.value=C,Z.uniforms.waterColor.value=P,Z.uniforms.sunDirection.value=M,Z.uniforms.distortionScale.value=D,Z.uniforms.speed.value=z,Z.uniforms.eye.value=b,n.material=Z,n.onBeforeRender=function(e,r,o){if(T.setFromMatrixPosition(n.matrixWorld),O.setFromMatrixPosition(o.matrixWorld),k.extractRotation(n.matrixWorld),L.set(0,0,1),L.applyMatrix4(k),F.subVectors(T,O),F.dot(L)>0)return;F.reflect(L).negate(),F.add(T),k.extractRotation(o.matrixWorld),N.set(0,0,-1),N.applyMatrix4(k),N.add(O),E.subVectors(T,N),E.reflect(L).negate(),E.add(T),I.position.copy(F),I.up.set(0,1,0),I.up.applyMatrix4(k),I.up.reflect(L),I.lookAt(E),I.far=o.far,I.updateMatrixWorld(),I.projectionMatrix.copy(o.projectionMatrix),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(I.projectionMatrix),A.multiply(I.matrixWorldInverse),j.setFromNormalAndCoplanarPoint(L,T),j.applyMatrix4(I.matrixWorldInverse),R.set(j.normal.x,j.normal.y,j.normal.z,j.constant);const t=I.projectionMatrix;H.x=(Math.sign(R.x)+t.elements[8])/t.elements[0],H.y=(Math.sign(R.y)+t.elements[9])/t.elements[5],H.z=-1,H.w=(1+t.elements[10])/t.elements[14],R.multiplyScalar(2/R.dot(H)),t.elements[2]=R.x,t.elements[6]=R.y,t.elements[10]=R.z+1-x,t.elements[14]=R.w,b.setFromMatrixPosition(o.matrixWorld);const i=e.getRenderTarget(),a=e.xr.enabled,l=e.shadowMap.autoUpdate;n.visible=!1,e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(V),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(r,I),n.visible=!0,e.xr.enabled=a,e.shadowMap.autoUpdate=l,e.setRenderTarget(i);const s=o.viewport;void 0!==s&&e.state.viewport(s)}}}w.prototype.isWater=!0}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return r[e](i,i.exports,n),i.exports}n.m=r,e=[],n.O=(r,o,t,i)=>{if(!o){var a=1/0;for(d=0;d<e.length;d++){for(var[o,t,i]=e[d],l=!0,s=0;s<o.length;s++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](o[s])))?o.splice(s--,1):(l=!1,i<a&&(a=i));if(l){e.splice(d--,1);var u=t();void 0!==u&&(r=u)}}return r}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,t,i]},n.d=(e,r)=>{for(var o in r)n.o(r,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};n.O.j=r=>0===e[r];var r=(r,o)=>{var t,i,[a,l,s]=o,u=0;if(a.some((r=>0!==e[r]))){for(t in l)n.o(l,t)&&(n.m[t]=l[t]);if(s)var d=s(n)}for(r&&r(o);u<a.length;u++)i=a[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},o=self.webpackChunkthree_demo=self.webpackChunkthree_demo||[];o.forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o))})();var t=n.O(void 0,[344],(()=>n(829)));t=n.O(t)})();